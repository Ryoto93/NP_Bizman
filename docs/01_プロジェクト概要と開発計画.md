# プロジェクト概要と開発計画

## プロジェクト名
NP_BusinessManagement

## プロジェクト目標
スタートアップ立ち上げ一年間の「収支計画」「予実管理」「人員・コスト管理」「顧客管理(CRM)」を一つのツールで完結させるWebアプリケーション

## 開発フェーズ計画

### Phase 1: プロジェクトセットアップと基盤構築
- [ ] Next.jsプロジェクトの初期化
- [ ] Supabaseプロジェクトのセットアップ
- [ ] Prismaスキーマの設計と実装
- [ ] 認証機能の実装（Supabase Auth）
- [ ] Shadcn/uiのセットアップ
- [ ] 基本的なレイアウトとナビゲーション構築

### Phase 2: マスター管理機能の実装
- [ ] 事業マスター管理
- [ ] 商材マスター管理
- [ ] 案件ステータス管理
- [ ] 設定・マスター管理画面（画面B）の実装

### Phase 3: 事業計画機能の実装
- [ ] KPI・売上ロジック設定機能
- [ ] KPI・売上計画入力機能（TanStack Table活用）
- [ ] 事業コスト計画入力機能
- [ ] 実績入力機能
- [ ] 事業計画詳細画面（画面C）の実装

### Phase 4: コーポレート計画機能の実装
- [ ] 人員計画機能（By Name）
- [ ] 全社コスト計画機能
- [ ] 実績入力機能
- [ ] コーポレート計画画面（画面D）の実装

### Phase 5: CRM機能の実装
- [ ] 顧客マスター管理
- [ ] 案件（商談）管理機能
- [ ] カンバンUI実装
- [ ] 売上実績への自動連携機能
- [ ] 顧客・案件管理画面（画面E）の実装

### Phase 6: ダッシュボード機能の実装
- [ ] 全社YTDサマリー表示
- [ ] CRMサマリー表示
- [ ] グラフ・可視化（Recharts活用）
- [ ] トップページ（画面A）の実装

### Phase 7: 統合テストと最適化
- [ ] 各機能間の連携テスト
- [ ] パフォーマンス最適化
- [ ] UI/UX改善
- [ ] デプロイ準備

## 技術スタック

### フロントエンド
- **Next.js 14+ (App Router)**: フルスタックフレームワーク
- **TypeScript**: 型安全性の確保
- **Shadcn/ui**: UIコンポーネントライブラリ
- **Tailwind CSS**: スタイリング
- **TanStack Table v8**: Excelライクな高機能テーブルUI
- **React Hook Form**: フォーム管理
- **Recharts**: グラフ・可視化

### バックエンド
- **Next.js API Routes**: バックエンドAPI
- **Prisma**: ORM
- **PostgreSQL**: データベース（Supabase経由）
- **Supabase**: BaaS（DBホスティング & 認証）

### デプロイ
- **Vercel**: ホスティング

## コア・ビジネスロジック

### 決算月
9月

### 四半期（Q）の定義
- **Q1**: 10-12月
- **Q2**: 1-3月
- **Q3**: 4-6月
- **Q4**: 7-9月

### シナリオと予算・最新見込み・実績

- **Betterケース**: 楽観的な予算シナリオ（計画値）
- **Badケース**: 悲観的な予算シナリオ（計画値）
- **Bestケース**: 最も理想的な予算シナリオ（計画値）
- **最新見込み（Latest Forecast）**: 管理会計上の「予実管理の予」に相当するシナリオ
  - 向こう1年の最新見込みを、日々の学びや変化を踏まえて随時更新する
  - 月初に前月実績を締めたタイミングで、残り期間の見込みをアップデートする運用を想定

**考え方の整理**

- **事業計画（予算）**:
  - Better / Bad / Best の3つのシナリオで、向こう1年の事業計画を固定的に定義する
  - 「経営会議で合意された計画値」として扱い、原則として頻繁には書き換えない
- **最新見込み（Forecast）**:
  - 現時点の情報・感触を反映した「今こうなりそう」という予測
  - 日常的にアップデートして良い前提で、Bad/Better/Best との差分を見るための軸
- **実績（Actual）**:
  - 会計上締めた数値をベースに、月次で更新される確定値
  - CRM（受注実績）とコスト入力から自動集計される

**ダッシュボードでの比較イメージ**

- 「事業計画（Better/Bad/Best）」 vs 「最新見込み」 vs 「実績」をリアルタイムに比較し、
  - 商材別
  - 事業別
  - 会社全体
  の各切り口で経営状況を可視化できる状態を目指す。

## 開発環境セットアップ手順

### 1. 必要なツール
- Node.js 18以上
- npm または yarn
- Git

### 2. プロジェクト初期化
```bash
npx create-next-app@latest . --typescript --tailwind --app --no-src-dir
```

### 3. 依存関係のインストール
```bash
npm install @prisma/client @tanstack/react-table react-hook-form recharts
npm install @supabase/supabase-js @supabase/auth-helpers-nextjs
npm install shadcn/ui の各コンポーネント
```

### 4. Supabaseセットアップ
1. Supabaseプロジェクトを作成
2. データベース接続情報を取得
3. 環境変数を設定

### 5. Prismaセットアップ
1. Prismaスキーマを作成
2. マイグレーション実行
3. Prisma Client生成

## UIデザイン方針

### デザインコンセプト
**シンプル、モダン、エピック**

### メインカラー
- **オレンジ**: `#F95F06` - 鮮やかなオレンジをメインカラーとして使用
- 詳細は [UIデザインガイドライン](./06_UIデザインガイドライン.md) を参照

## 次のステップ
詳細な設計書を参照して実装を進めていきます。
- [データベース設計書](./02_データベース設計.md)
- [API設計書](./03_API設計.md)
- [画面設計書](./04_画面設計.md)
- [UIデザインガイドライン](./06_UIデザインガイドライン.md)

